[phases.setup]
nixPkgs = [
  "php",
  "php82Extensions.pdo",
  "php82Extensions.pdo_mysql",
  "php82Extensions.gd"
]

[phases.build]
commands = [
  "composer install --no-dev --optimize-autoloader",
  "npm ci",
  "npm run build"
]

[start]
cmd = """
if [ -L public/storage ]; then
  echo 'ðŸ”„ XÃ³a symlink cÅ©...';
  rm public/storage;
fi

echo 'ðŸ”— Táº¡o symlink má»›i...';
php artisan storage:link

echo 'ðŸš€ Khá»Ÿi Ä‘á»™ng FrankenPHP...';
frankenphp php-server public/index.php --port $PORT
"""
